import{_ as d,r as l,u as m,o as f,a as g,b as v,c,d as _,e as y,f as b,g as h}from"./index-630a07ef.js";const C={class:"container"},x=18e4,I=500,k={__name:"Calling",setup(i){l("");const s=m(),a=new URL("/static/assets/ring.mp3",self.location);let e;const t=l(null),p=async()=>{e.loop=!0,e.play(),setTimeout(async()=>{const o=parseInt(localStorage.getItem("room"),10),r="https://bramka:443/api/call",u={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({room:o,ongoing_call:!1})};await fetch(r,u),e.pause(),s.push({name:"standby"})},x)};let n;return f(()=>{e=new Audio(a),p(),t.value.setAttribute("src","https://bramka/api/stream/video_feed"),n=setInterval(()=>g(s,t),I)}),v(()=>{clearInterval(n),t.value.setAttribute("src","../assets/standby.png"),e.pause()}),(o,r)=>(c(),_("div",C,[y("img",{ref_key:"video",ref:t,class:"video",src:b},null,512)]))}},w=d(k,[["__scopeId","data-v-ea860f40"]]);const B={__name:"CallingView",setup(i){return(s,a)=>(c(),_("main",null,[h(w)]))}};export{B as default};
