import{_ as d,r as l,u as m,o as g,a as f,b as v,c,d as i,e as y,f as b,g as h}from"./index-c9074289.js";import"./webrtc-cef9cac6.js";const C={class:"container"},x=18e4,I=500,k={__name:"Calling",setup(_){l("");const s=m(),a=new URL("/static/assets/ring.mp3",self.location);let e;const t=l(null),p=async()=>{e.loop=!0,e.play(),setTimeout(async()=>{const o=parseInt(localStorage.getItem("room"),10),r="https://bramka:443/api/call",u={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({room:o,ongoing_call:!1})};await fetch(r,u),e.pause(),s.push({name:"standby"})},x)};let n;return g(()=>{e=new Audio(a),p(),t.value.setAttribute("src","https://bramka:8080/stream/video.mjpeg"),n=setInterval(()=>f(s,t),I)}),v(()=>{clearInterval(n),t.value.setAttribute("src","../assets/standby.png"),e.pause()}),(o,r)=>(c(),i("div",C,[y("img",{ref_key:"video",ref:t,class:"video",src:b},null,512)]))}},w=d(k,[["__scopeId","data-v-8709d8bf"]]);const O={__name:"CallingView",setup(_){return(s,a)=>(c(),i("main",null,[h(w)]))}};export{O as default};
