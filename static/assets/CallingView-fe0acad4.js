import{_ as m,r as l,u as g,o as f,a as v,b as y,c as i,d as _,e as b,f as h,w as I,g as C}from"./index-eea7eb21.js";const w={class:"container"},T=18e4,k=500,x={__name:"Calling",setup(u){l("");const s=g(),a=new URL("/static/assets/ring.mp3",self.location);let e,n;const t=l(null),p=async()=>{I(),e.loop=!0,e.play(),n=setTimeout(async()=>{const r=parseInt(localStorage.getItem("room"),10),c="https://bramka:443/api/call",d={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({room:r,call_status:"INACTIVE"})};await fetch(c,d),e.pause(),s.push({name:"standby"})},T)};let o;return f(()=>{e=new Audio(a),p(),t.value.setAttribute("src","https://bramka:8080/stream/video.mjpeg"),o=setInterval(()=>v(s,t),k)}),y(()=>{clearInterval(o),clearTimeout(n),t.value.setAttribute("src","../assets/standby.png"),e.pause()}),(r,c)=>(i(),_("div",w,[b("img",{ref_key:"video",ref:t,class:"video",src:h},null,512)]))}},S=m(x,[["__scopeId","data-v-8837fcd8"]]);const A={__name:"CallingView",setup(u){return(s,a)=>(i(),_("main",null,[C(S)]))}};export{A as default};
