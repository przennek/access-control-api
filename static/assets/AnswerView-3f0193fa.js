import{_ as l,r as c,u as _,o as p,a as m,b as f,c as u,d,e as i,f as v,t as g,g as w}from"./index-630a07ef.js";const b=()=>{const s=new(window.AudioContext||window.webkitAudioContext),e=s.createScriptProcessor(0,1,1),t=new WebSocket("wss://bramka:443");e.onaudioprocess=a=>{const o=a.inputBuffer.getChannelData(0),r=new Int16Array(o.length);for(let n=0;n<o.length;n++)r[n]=o[n]*32767;t.send(r.buffer)},navigator.mediaDevices.getUserMedia({audio:!0}).then(a=>{s.createMediaStreamSource(a).connect(e),e.connect(s.destination),console.log("Started audio streaming")}).catch(a=>{console.error("Error accessing microphone:",a)})};const y={class:"container"},A=500,S={__name:"Answer",setup(s){const e=c(null);c(null);const t=c(null),a=c(!1),o=_();let r;const n=()=>{b()};return p(()=>{r=setInterval(async()=>m(o,t),A),t.value.setAttribute("src","https://bramka/api/stream/video_feed"),e.value.setAttribute("src","https://bramka/api/stream/audio_feed"),e.value.play()}),f(()=>{clearInterval(r),t.value.setAttribute("src","../assets/standby.png"),e.value.setAttribute("src",""),e.value.pause()}),(k,x)=>(u(),d("div",y,[i("img",{ref_key:"video",ref:t,class:"video",src:v},null,512),i("audio",{id:"audio",ref_key:"audio",ref:e,src:"",type:"audio/x-wav;codec=pcm",class:"hidden",preload:"none"},null,512),i("button",{onClick:n},g(a.value?"Stop Streaming":"Start Streaming"),1)]))}},h=l(S,[["__scopeId","data-v-8b862aad"]]);const B={__name:"AnswerView",setup(s){return(e,t)=>(u(),d("main",null,[w(h)]))}};export{B as default};
