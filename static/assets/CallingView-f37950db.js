import{_ as d,r as c,u as m,o as g,a as v,b as y,c as l,d as _,e as f,f as b,w as h,g as C}from"./index-e948cc44.js";import"./webrtc-502b8ba4.js";const I={class:"container"},w=18e4,k=500,x={__name:"Calling",setup(i){c("");const s=m(),a=new URL("/static/assets/ring.mp3",self.location);let e;const t=c(null),p=async()=>{h(),e.loop=!0,e.play(),setTimeout(async()=>{const o=parseInt(localStorage.getItem("room"),10),r="https://bramka:443/api/call",u={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({room:o,call_status:"INACTIVE"})};await fetch(r,u),e.pause(),s.push({name:"standby"})},w)};let n;return g(()=>{e=new Audio(a),p(),t.value.setAttribute("src","https://bramka:8080/stream/video.mjpeg"),n=setInterval(()=>v(s,t),k)}),y(()=>{clearInterval(n),t.value.setAttribute("src","../assets/standby.png"),e.pause()}),(o,r)=>(l(),_("div",I,[f("img",{ref_key:"video",ref:t,class:"video",src:b},null,512)]))}},T=d(x,[["__scopeId","data-v-c9035615"]]);const A={__name:"CallingView",setup(i){return(s,a)=>(l(),_("main",null,[C(T)]))}};export{A as default};
